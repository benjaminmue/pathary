<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}Error{% endblock %} | {{ applicationName ?? 'Pathary' }}</title>
    <link rel="shortcut icon" href="{{ applicationUrl }}/images/favicon.ico" type="image/x-icon">

    <!-- Theme initialization (runs before page render to prevent flash) -->
    <script>
        (function() {
            const saved = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const theme = saved || (prefersDark ? 'dark' : 'light');
            document.documentElement.setAttribute('data-bs-theme', theme);
        })();
    </script>

    <!-- Bootstrap CSS -->
    <link href="{{ applicationUrl }}/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ applicationUrl }}/css/bootstrap-icons-1.10.2.css">

    <!-- Custom Theme CSS -->
    <link rel="stylesheet" href="{{ applicationUrl }}/assets/css/theme.css">

    <style>
        .error-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 60vh;
            padding: 2rem 1rem;
        }

        .error-code {
            font-size: 8rem;
            font-weight: 700;
            line-height: 1;
            margin-bottom: 1.5rem;
            font-family: 'Courier New', 'Courier', monospace;
            letter-spacing: 0.15em;
            background: linear-gradient(135deg, var(--pathe-yellow), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        @media (max-width: 576px) {
            .error-code {
                font-size: 5rem;
                letter-spacing: 0.1em;
            }
        }

        @media (prefers-reduced-motion: reduce) {
            .error-code {
                transition: none;
            }
        }

        .error-logo {
            opacity: 0.3;
            width: 300px;
            height: 300px;
            margin-bottom: 2rem;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        [data-bs-theme="dark"] .error-logo {
            opacity: 0.2;
        }

        @media (max-width: 576px) {
            .error-logo {
                width: 200px;
                height: 200px;
            }
        }

        .error-title {
            font-size: 1.75rem;
            font-weight: 500;
            margin-bottom: 0.75rem;
        }

        .error-message {
            font-size: 1.1rem;
            color: var(--bs-secondary-color);
            margin-bottom: 2rem;
            margin-left: auto;
            margin-right: auto;
            max-width: 600px;
            text-align: center;
        }

        .error-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .error-actions .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .btn-error-primary {
            background-color: var(--pathe-yellow);
            border-color: var(--pathe-yellow);
            color: var(--pathe-dark);
            padding: 0.75rem 2rem;
            font-weight: 500;
        }

        .btn-error-primary:hover {
            background-color: #e5ab08;
            border-color: #e5ab08;
            color: var(--pathe-dark);
        }

        .btn-error-secondary {
            background-color: var(--accent-purple);
            border-color: var(--accent-purple);
            color: white;
            padding: 0.75rem 2rem;
            font-weight: 500;
        }

        .btn-error-secondary:hover {
            background-color: #5d25a1;
            border-color: #5d25a1;
            color: white;
        }

        .error-meta {
            margin-top: 3rem;
            font-size: 0.875rem;
            color: var(--bs-secondary-color);
            text-align: center;
        }

        .error-meta-item {
            display: inline-block;
            margin: 0 0.5rem;
        }
    </style>
</head>
<body class="d-flex flex-column min-vh-100">
    {% if isAuthenticated %}
        {% include 'partials/navbar_app.twig' %}
    {% else %}
        {% include 'partials/navbar_public.twig' %}
    {% endif %}

    <main class="flex-grow-1">
        {% block body %}{% endblock %}
    </main>

    {% include 'partials/footer.twig' %}

    <!-- Bootstrap JS -->
    <script src="{{ applicationUrl }}/js/bootstrap.bundle.min.js"></script>

    <!-- Theme Toggle JS -->
    <script src="{{ applicationUrl }}/assets/js/theme.js"></script>
</body>
</html>
